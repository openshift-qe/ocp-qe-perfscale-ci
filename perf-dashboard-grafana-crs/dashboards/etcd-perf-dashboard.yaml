apiVersion: integreatly.org/v1alpha1
kind: GrafanaDashboard
metadata:
  labels:
    app: grafana
  name: etcd-perf-dashboard
spec:
  json: '{    "__inputs": [ ],    "__requires": [ ],    "annotations": {       "list": [ ]    },    "description": "",    "editable": "true",    "gnetId": null,    "graphTooltip": 0,    "hideControls": false,    "id": null,    "links": [ ],    "panels": [       {          "collapse": true,          "collapsed": true,          "gridPos": {             "gridPos": {                "h": 1,                "w": 24,                "x": 0,                "y": 0             }          },          "id": 2,          "panels": [             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 1                },                "id": 3,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(irate(container_cpu_usage_seconds_total{namespace=\"openshift-etcd\", container=\"etcd\"}[2m])) by (pod) * 100",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "CPU usage",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "percent",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "percent",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 1                },                "id": 4,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(avg_over_time(container_memory_working_set_bytes{container=\"\",pod!=\"\", namespace=~\"openshift-etcd.*\"}[2m])) BY (pod, namespace)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Memory usage",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 8                },                "id": 5,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "histogram_quantile(0.99, sum(irate(etcd_disk_wal_fsync_duration_seconds_bucket[2m])) by (pod, le))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}} WAL fsync",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Disk WAL Sync Duration",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 8                },                "id": 6,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "histogram_quantile(0.99, sum(irate(etcd_disk_backend_commit_duration_seconds_bucket[2m])) by (pod, le))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}} DB fsync",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Disk Backend Sync Duration",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 16                },                "id": 7,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "rate(container_fs_writes_bytes_total{container=\"etcd\",device!~\".+dm.+\"}[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }}: {{ device }}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Etcd container disk writes",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 16                },                "id": 8,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_mvcc_db_total_size_in_bytes",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}} DB physical size",                      "refId": "A"                   },                   {                      "expr": "etcd_mvcc_db_total_size_in_use_in_bytes",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}} DB logical size",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "DB Size",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             }          ],          "repeat": null,          "repeatIteration": null,          "repeatRowId": null,          "showTitle": true,          "title": "General Resource Usage",          "titleSize": "h6",          "type": "row"       },       {          "collapse": true,          "collapsed": true,          "gridPos": {             "gridPos": {                "h": 1,                "w": 24,                "x": 0,                "y": 1             }          },          "id": 9,          "panels": [             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 1                },                "id": 10,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(rate(container_network_receive_bytes_total{ container=\"etcd\", namespace=~\"openshift-etcd.*\"}[2m])) BY (namespace, pod)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "rx {{ pod }}",                      "refId": "A"                   },                   {                      "expr": "sum(rate(container_network_transmit_bytes_total{ container=\"etcd\", namespace=~\"openshift-etcd.*\"}[2m])) BY (namespace, pod)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "tx {{ pod }}",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Container network traffic",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 1                },                "id": 11,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "histogram_quantile(0.99, rate(etcd_network_peer_round_trip_time_seconds_bucket[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "p99 peer to peer latency",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 8                },                "id": 12,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "rate(etcd_network_peer_received_bytes_total[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "rx {{pod}} Peer Traffic",                      "refId": "A"                   },                   {                      "expr": "rate(etcd_network_peer_sent_bytes_total[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "tx {{pod}} Peer Traffic",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Peer network traffic",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 8                },                "id": 13,                "legend": {                   "alignAsTable": true,                   "avg": true,                   "current": false,                   "hideEmpty": true,                   "hideZero": true,                   "max": true,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "sort": "max",                   "total": false,                   "values": true                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null as zero",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "rate(etcd_network_client_grpc_received_bytes_total[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "rx {{pod}}",                      "refId": "A"                   },                   {                      "expr": "rate(etcd_network_client_grpc_sent_bytes_total[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "tx {{pod}}",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "gRPC network traffic",                "tooltip": {                   "shared": true,                   "sort": 2,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "Bps",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 16                },                "id": 14,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(grpc_server_started_total{grpc_service=\"etcdserverpb.Watch\",grpc_type=\"bidi_stream\"}) - sum(grpc_server_handled_total{grpc_service=\"etcdserverpb.Watch\",grpc_type=\"bidi_stream\"})",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Watch Streams",                      "refId": "A"                   },                   {                      "expr": "sum(grpc_server_started_total{grpc_service=\"etcdserverpb.Lease\",grpc_type=\"bidi_stream\"}) - sum(grpc_server_handled_total{grpc_service=\"etcdserverpb.Lease\",grpc_type=\"bidi_stream\"})",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Lease Streams",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Active Streams",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 16                },                "id": 15,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(rate(etcd_debugging_snap_save_total_duration_seconds_sum[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "the total latency distributions of save called by snapshot",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Snapshot duration",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "s",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             }          ],          "repeat": null,          "repeatIteration": null,          "repeatRowId": null,          "showTitle": true,          "title": "Network Usage",          "titleSize": "h6",          "type": "row"       },       {          "collapse": true,          "collapsed": true,          "gridPos": {             "gridPos": {                "h": 1,                "w": 24,                "x": 0,                "y": 2             }          },          "id": 16,          "panels": [             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 8,                   "x": 0,                   "y": 8                },                "id": 17,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "(etcd_mvcc_db_total_size_in_bytes{} / etcd_server_quota_backend_bytes{})*100",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "% DB Space Used",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "percent",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "percent",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 8,                   "x": 8,                   "y": 8                },                "id": 18,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_server_quota_backend_bytes{} - etcd_mvcc_db_total_size_in_bytes{}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{pod}}",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "DB Left capacity (with fragmented space)",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 8,                   "x": 16,                   "y": 8                },                "id": 19,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_server_quota_backend_bytes{}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} Quota Bytes",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "DB Size Limit (Backend-bytes)",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "bytes",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             }          ],          "repeat": null,          "repeatIteration": null,          "repeatRowId": null,          "showTitle": true,          "title": "DB Info per Member",          "titleSize": "h6",          "type": "row"       },       {          "collapse": true,          "collapsed": true,          "gridPos": {             "gridPos": {                "h": 1,                "w": 24,                "x": 0,                "y": 3             }          },          "id": 20,          "panels": [             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 1                },                "id": 21,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(rate(etcd_server_proposals_failed_total[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Proposal Failure Rate",                      "refId": "A"                   },                   {                      "expr": "sum(etcd_server_proposals_pending)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Proposal Pending Total",                      "refId": "B"                   },                   {                      "expr": "sum(rate(etcd_server_proposals_committed_total[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Proposal Commit Rate",                      "refId": "C"                   },                   {                      "expr": "sum(rate(etcd_server_proposals_applied_total[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "Proposal Apply Rate",                      "refId": "D"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Raft Proposals",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 1                },                "id": 22,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "sum(rate(etcd_server_leader_changes_seen_total[2m]))",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Number of leader changes seen",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "cacheTimeout": null,                "colorBackground": false,                "colorValue": false,                "colors": [                   "#299c46",                   "rgba(237, 129, 40, 0.89)",                   "#d44a3a"                ],                "datasource": "$datasource",                "format": "none",                "gauge": {                   "maxValue": 100,                   "minValue": 0,                   "show": false,                   "thresholdLabels": false,                   "thresholdMarkers": true                },                "gridPos": {                   "h": 2,                   "w": 6,                   "x": 0,                   "y": 8                },                "id": 23,                "interval": null,                "links": [ ],                "mappingType": 1,                "mappingTypes": [                   {                      "name": "value to text",                      "value": 1                   },                   {                      "name": "range to text",                      "value": 2                   }                ],                "maxDataPoints": 100,                "nullPointMode": "connected",                "nullText": null,                "postfix": "",                "postfixFontSize": "50%",                "prefix": "",                "prefixFontSize": "50%",                "rangeMaps": [                   {                      "from": "null",                      "text": "N/A",                      "to": "null"                   }                ],                "sparkline": {                   "fillColor": "rgba(31, 118, 189, 0.18)",                   "full": false,                   "lineColor": "rgb(31, 120, 193)",                   "show": false                },                "tableColumn": "",                "targets": [                   {                      "expr": "max(etcd_server_has_leader)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "",                      "refId": "A"                   }                ],                "thresholds": "",                "title": "Etcd has a leader?",                "type": "singlestat",                "valueFontSize": "80%",                "valueMaps": [                   {                      "op": "=",                      "text": "YES",                      "value": "1"                   },                   {                      "op": "=",                      "text": "NO",                      "value": "0"                   }                ],                "valueName": "avg"             },             {                "cacheTimeout": null,                "colorBackground": false,                "colorValue": false,                "colors": [                   "#299c46",                   "rgba(237, 129, 40, 0.89)",                   "#d44a3a"                ],                "datasource": "$datasource",                "format": "none",                "gauge": {                   "maxValue": 100,                   "minValue": 0,                   "show": false,                   "thresholdLabels": false,                   "thresholdMarkers": true                },                "gridPos": {                   "h": 2,                   "w": 6,                   "x": 6,                   "y": 8                },                "id": 24,                "interval": null,                "links": [ ],                "mappingType": 1,                "mappingTypes": [                   {                      "name": "value to text",                      "value": 1                   },                   {                      "name": "range to text",                      "value": 2                   }                ],                "maxDataPoints": 100,                "nullPointMode": "connected",                "nullText": null,                "postfix": "",                "postfixFontSize": "50%",                "prefix": "",                "prefixFontSize": "50%",                "rangeMaps": [                   {                      "from": "null",                      "text": "N/A",                      "to": "null"                   }                ],                "sparkline": {                   "fillColor": "rgba(31, 118, 189, 0.18)",                   "full": false,                   "lineColor": "rgb(31, 120, 193)",                   "show": false                },                "tableColumn": "",                "targets": [                   {                      "expr": "max(etcd_server_proposals_committed_total)",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "",                      "refId": "A"                   }                ],                "thresholds": "",                "title": "Total number of failed proposals seen",                "type": "singlestat",                "valueFontSize": "80%",                "valueMaps": [                   {                      "op": "=",                      "text": "N/A",                      "value": "null"                   }                ],                "valueName": "avg"             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 6,                   "w": 12,                   "x": 0,                   "y": 12                },                "id": 25,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "changes(etcd_server_leader_changes_seen_total[1d])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{instance}} Total Leader Elections Per Day",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Leader Elections Per Day",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 12                },                "id": 26,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_debugging_mvcc_keys_total{pod=~\"$pod\"}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} Num keys",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Keys",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 20                },                "id": 27,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "delta(etcd_server_slow_apply_total{pod=~\"$pod\"}[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} slow applies",                      "refId": "A"                   },                   {                      "expr": "delta(etcd_server_slow_read_indexes_total{pod=~\"$pod\"}[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} slow read indexes",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Slow Operations",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "ops",                      "show": "true"                   },                   {                      "format": "short",                      "show": "false"                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 20                },                "id": 28,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "rate(etcd_debugging_mvcc_put_total{pod=~\"$pod\"}[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} puts/s",                      "refId": "A"                   },                   {                      "expr": "rate(etcd_debugging_mvcc_delete_total{pod=~\"$pod\"}[2m])",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} deletes/s",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Key Operations",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "ops",                      "show": "true"                   },                   {                      "format": "short",                      "show": "false"                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 0,                   "y": 28                },                "id": 29,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_server_heartbeat_send_failures_total{pod=~\"$pod\"}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} heartbeat  failures",                      "refId": "A"                   },                   {                      "expr": "etcd_server_health_failures{pod=~\"$pod\"}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod }} health failures",                      "refId": "B"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Heartbeat Failures",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             },             {                "aliasColors": { },                "bars": false,                "dashLength": 10,                "dashes": false,                "datasource": "$datasource",                "fill": 1,                "fillGradient": 0,                "gridPos": {                   "h": 8,                   "w": 12,                   "x": 12,                   "y": 28                },                "id": 30,                "legend": {                   "alignAsTable": false,                   "avg": false,                   "current": false,                   "max": false,                   "min": false,                   "rightSide": false,                   "show": true,                   "sideWidth": null,                   "total": false,                   "values": false                },                "lines": true,                "linewidth": 1,                "links": [ ],                "nullPointMode": "null",                "percentage": false,                "pointradius": 5,                "points": false,                "renderer": "flot",                "repeat": null,                "seriesOverrides": [ ],                "spaceLength": 10,                "stack": false,                "steppedLine": false,                "targets": [                   {                      "expr": "etcd_debugging_mvcc_db_compaction_keys_total{pod=~\"$pod\"}",                      "format": "time_series",                      "intervalFactor": 2,                      "legendFormat": "{{ pod  }} keys compacted",                      "refId": "A"                   }                ],                "thresholds": [ ],                "timeFrom": null,                "timeShift": null,                "title": "Compacted Keys",                "tooltip": {                   "shared": true,                   "sort": 0,                   "value_type": "individual"                },                "type": "graph",                "xaxis": {                   "buckets": null,                   "mode": "time",                   "name": null,                   "show": true,                   "values": [ ]                },                "yaxes": [                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   },                   {                      "format": "short",                      "label": null,                      "logBase": 1,                      "max": null,                      "min": null,                      "show": true                   }                ]             }          ],          "repeat": null,          "repeatIteration": null,          "repeatRowId": null,          "showTitle": true,          "title": "General Info",          "titleSize": "h6",          "type": "row"       }    ],    "refresh": "",    "rows": [ ],    "schemaVersion": 14,    "style": "dark",    "tags": [ ],    "templating": {       "list": [          {             "current": {                "text": "",                "value": ""             },             "hide": 0,             "label": "datasource",             "name": "datasource",             "options": [ ],             "query": "prometheus",             "refresh": 1,             "regex": "",             "type": "datasource"          },          {             "allValue": null,             "current": { },             "datasource": "$datasource",             "hide": 0,             "includeAll": false,             "label": null,             "multi": false,             "name": "pod",             "options": [ ],             "query": "label_values({job=\"etcd\"}, pod)",             "refresh": 1,             "regex": "",             "sort": 0,             "tagValuesQuery": "",             "tags": [ ],             "tagsQuery": "",             "type": "query",             "useTags": false          }       ]    },    "time": {       "from": "now-1h",       "to": "now"    },    "timepicker": {       "refresh_intervals": [          "5s",          "10s",          "30s",          "1m",          "5m",          "15m",          "30m",          "1h",          "2h",          "1d"       ],       "time_options": [          "5m",          "15m",          "1h",          "6h",          "12h",          "24h",          "2d",          "7d",          "30d"       ]    },    "timezone": "utc",    "title": "etcd-cluster-info",    "version": 0 }'
  name: etcd-perf.json